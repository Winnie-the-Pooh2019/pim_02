# Exercise 03 — Check of input and output streams (Task 1, prefix: bsh)

Примечание: отдельная контекстная диаграмма `to be` для `bsh` не создавалась в рамках Exercise 01 (по README она обязательна для задачи 2). Поэтому ниже — таблица потоков как «проверка полноты» будущих взаимодействий; при необходимости её можно использовать для построения контекстной диаграммы `bsh`.

## Таблица входных/выходных потоков данных (`to be`)

Условные обозначения:
- **IN** — поток из внешней сущности в систему
- **OUT** — поток из системы во внешнюю сущность

| Stream ID | Внешняя сущность | Direction | Наименование потока | Состав данных (пример) | Назначение/замечания |
|---:|---|:---:|---|---|---|
| bsh-01 | Посетитель/клиент (в т.ч. гость) | IN | Запрос на запись | Тип услуги, услуга, мастер, желаемое время/слот, контакты, комментарий | Создание бронирования в системе |
| bsh-02 | Посетитель/клиент | OUT | Подтверждение записи | Номер записи, дата/время, адрес салона, мастер/услуга, правила отмены | Уменьшение ошибок и «потерь» заявок |
| bsh-03 | Посетитель/клиент | IN | Изменение записи | Перенос/отмена, выбор нового слота, причина, подтверждение контакта | Управление записью без звонков менеджеру |
| bsh-04 | Посетитель/клиент | OUT | Статусы записи | Статус (создана/подтверждена/перенесена/отменена/выполнена), уведомления | Прозрачность жизненного цикла записи |
| bsh-05 | Посетитель/клиент | IN | Предпочтения уведомлений | Канал (TG/WA/VK/SMS), контакт (ник/телефон), согласия | Выбор канала связи и юридические согласия |
| bsh-06 | Посетитель/клиент | OUT | Напоминания/опросы | Напоминание о визите, просьба оценить услугу, ссылка на отзыв | Снижение no‑show и сбор NPS/отзывов |
| bsh-07 | Посетитель/клиент | IN | Оценка/отзыв | Оценка, текст, теги, согласие на публикацию | Сбор обратной связи, контроль качества |
| bsh-08 | Менеджер | IN | Управление расписанием | Слоты/перерывы, блокировки, переносы, привязка услуг к мастерам | Централизованное управление расписанием |
| bsh-09 | Менеджер | OUT | Уведомления/алерты | Конфликты расписания, отмены, no‑show, ошибки отправки уведомлений | Реакция на исключения без ручного мониторинга |
| bsh-10 | Менеджер | IN | Завершение услуги/финансы | Отметка «выполнено», сумма/скидка, способ оплаты, комментарии | Связка «запись—оказание—оплата» |
| bsh-11 | Менеджер | OUT | Отчёты/выгрузки | Реестры записей/оказанных услуг, выручка, загрузка, отзывы | Операционный контроль и отчётность |
| bsh-12 | Мастер | IN | Доступность/изменения | Запрос на блокировку времени (отпуск/болезнь), комментарии | Внесение изменений с фиксацией причин |
| bsh-13 | Мастер | OUT | Расписание/записи | Расписание, список клиентов на день, изменения/уведомления | Единый источник истины по загрузке мастера |
| bsh-14 | Администратор системы | IN | Управление доступами | Создание пользователей (менеджер/мастер), роли/права, блокировки | Контроль доступа и безопасности |
| bsh-15 | Администратор системы | OUT | Аудит/журналы | Журналы действий, события безопасности, отчёты по доступам | Расследование инцидентов и контроль соответствия |
| bsh-16 | Сервис сообщений (SMS/Telegram/WhatsApp/VK) | OUT | Отправка сообщений | Шаблон, получатель, канал, параметры, id записи | Доставка напоминаний/статусов в выбранный канал |
| bsh-17 | Сервис сообщений (SMS/Telegram/WhatsApp/VK) | IN | Статус доставки | Успех/ошибка, причина, providerMessageId, время | Контроль качества уведомлений и ретраи |
| bsh-18 | Провайдер платежей (если онлайн‑оплата) | OUT | Запрос оплаты/возврата | Сумма, заказ/запись, назначение, параметры возврата | Онлайн‑оплата/предоплата (опционально) |
| bsh-19 | Провайдер платежей | IN | Статус платежа | Успех/ошибка, транзакция, причина, время | Прозрачность оплат и возвратов |
| bsh-20 | Бухгалтерия (внешняя ИТ‑система) | OUT | Данные об оплатах | Реестр оплат, суммы, налоги/ставки (если применимо), период | Сверка и учёт (по требованиям организации) |
