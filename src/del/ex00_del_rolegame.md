# Exercise 00 — Role-playing game (Ролевая игра)

Задача: 2 — Delivery of orders (prefix: `del`)

Формат: ролевая игра с фиксацией гипотез и уточнений по ролям (эмуляция с ИИ-участниками).

Основание (предыдущие артефакты по задаче 2):  
`src/del/ex00_del_stakeholders.md`, `src/del/ex00_del_asis.md`, `src/del/ex02_del_needs.md`, `src/del/ex01_delcontext.drawio`.

## 1) Цели ролевой игры

Погружение в задачу и выявление:
1. Для кого строим систему и какие потребности закрываем.
2. Какие проблемы решаем и чьи это проблемы.
3. Мотивация деятельности ролей (что для них успех).
4. Основа бизнеса и как он работает (какие роли и процессы).
5. Где происходят процессы (точки комплектации/выдачи/доставки; онлайн/офлайн; распределённость команды).
6. Когда происходят процессы (пики, SLA, часовые пояса, временные ограничения).

## 2) Распределение участников по ролям

| Участник    | Функция в игре        | Роль (стейкхолдер)                                                    |
|-------------|-----------------------|-----------------------------------------------------------------------|
| Иван        | Ведущий (фасилитатор) | Бизнес-аналитик / модератор                                           |
| Участник-1  | Делопроизводитель     | Протоколирование (заметки/решения)                                    |
| Участник-2  | Делопроизводитель     | Протоколирование (Q&A, термины)                                       |
| Участник-3  | Участник              | st002001 — Учредитель стартапа                                        |
| Участник-4  | Участник              | st002002 — Оператор ввода заказов                                     |
| Участник-5  | Участник              | st002003 — Курьер                                                     |
| Участник-6  | Участник              | st002004 — Диспетчер                                                  |
| Участник-7  | Участник              | st002005 — Поставщик (магазин/кафе)                                   |
| Участник-8  | Участник              | st002006 — Клиент (получатель заказа)                                 |
| Участник-9  | Участник              | st002007 — Бухгалтерия (внешняя ИТ‑система/отдел)                     |
| Участник-10 | Участник              | st002008 — Администратор системы                                      |
| Участник-11 | Участник              | st002009 — Команда разработки / DevOps (обязательная роль по заданию) |
| Участник-12 | Участник              | st002011 — Служба поддержки                                           |

## 3) Легенда (контекст игры)

Стартап доставки работает в городе N. Заказы приходят от нескольких магазинов/кафе через телефон/мессенджеры/почту. Оператор приводит информацию к «единому виду» и передаёт курьерам. Диспетчер вручную контролирует выполнение и решает проблемы (переназначение/опоздание/неполные данные). Клиенты часто спрашивают «где заказ». Бухгалтерия получает реестры заказов и фактов доставки для расчётов с поставщиками и курьерами, но данные разрознены.

Цель будущей системы: единая онлайн‑платформа с веб‑интерфейсом оператора и диспетчера, мобильным приложением курьера, интеграцией с бухгалтерией, уведомлениями и картами/маршрутизацией.

## 4) Краткое описание ролей о себе + потребности и проблемы

Ниже — краткие «самопрезентации» ролей, их потребности и основные боли в текущем процессе.

### st002001 — Учредитель стартапа
- Кто я: отвечаю за стратегию, деньги и «чтобы сервис не развалился», пока растём.
- Потребности: метрики (кол-во заказов, SLA, выручка/маржа, churn поставщиков), управляемость процесса, возможность быстро менять правила.
- Проблемы `as is`: нет единой картины; не понимаю истинные причины срывов; масштабирование упирается в ручной контроль.

### st002002 — Оператор ввода заказов
- Кто я: принимаю заказы из разных каналов, привожу к формату, уточняю детали.
- Потребности: удобный ввод с подсказками/валидацией, шаблоны поставщиков, очередь «что срочно», история уточнений.
- Проблемы `as is`: данные неполные/разные; много ручной переписки; ошибки в адресах и времени; на пиках всё «горит».

### st002003 — Курьер
- Кто я: беру заказы, забираю в точке выдачи, доставляю клиенту.
- Потребности: актуальные задания, понятный маршрут/ETA, стабильные начисления/выплаты, быстрый канал “проблема”.
- Проблемы `as is`: двойные назначения/путаница; заказ может быть не готов; адрес/контакт неверный; сложно доказать факт передачи (споры).

### st002004 — Диспетчер
- Кто я: слежу за заказами и курьерами, переназначаю, тушу пожары.
- Потребности: мониторинг статусов, алерты по SLA, возможность быстро переназначить/эскалировать, причины задержек.
- Проблемы `as is`: статусы приходят с задержкой и в чате; нет таймлайна событий; много ручной коммуникации.

### st002005 — Поставщик (магазин/кафе)
- Кто я: формирую заказ и выдаю его курьеру, хочу чтобы было быстро и без ошибок.
- Потребности: понятный формат заказа, подтверждение что заказ принят, обмен статусами “готово/выдано”, требования к упаковке.
- Проблемы `as is`: оператор может неправильно записать; курьер приезжает рано/поздно; трудно выяснить “кто повезёт”.

### st002006 — Клиент (получатель заказа)
- Кто я: хочу быстро получить заказ и понимать, когда приедут.
- Потребности: статус/ETA, понятные окна доставки, возможность связаться с поддержкой/курьером, простой способ подтвердить получение.
- Проблемы `as is`: нет трекинга; опоздания без предупреждений; сложно изменить адрес/время; споры “доставлено/не доставлено”.

### st002007 — Бухгалтерия (внешняя ИТ‑система/отдел)
- Кто я: закрываю расчёты с поставщиками и курьерами, мне нужны корректные реестры.
- Потребности: согласованный формат данных, автоматические выгрузки, статусы выплат/удержаний, минимизация ручных сверок.
- Проблемы `as is`: файлы/сообщения неполные; разные форматы; тяжело подтвердить факт доставки; споры по выплатам.

### st002008 — Администратор системы
- Кто я: завожу пользователей, выдаю права, отвечаю за доступы и безопасность.
- Потребности: RBAC, аудит‑логи, инструменты блокировок, минимальная ручная рутина.
- Проблемы `as is`: доступы ведутся “вручную” и несогласованно; нет следов “кто что сделал”.

### st002009 — Команда разработки / DevOps
- Кто мы: делаем систему и мобильное приложение, отвечаем за стабильность релизов.
- Потребности: ясные требования, события/статусы как доменная модель, тестовые сценарии и данные, метрики/логи.
- Проблемы `as is`: требования меняются “на словах”; нет наблюдаемости; сложно воспроизводить инциденты.

### st002011 — Служба поддержки
- Кто мы: принимаем обращения от клиентов/поставщиков, решаем проблемы и эскалируем.
- Потребности: карточка заказа, история статусов/контактов, шаблоны ответов, быстрые эскалации диспетчеру.
- Проблемы `as is`: нет единого источника правды; много повторяющихся вопросов; требуется “звонить всем по цепочке”.

## 5) Вопросы и ответы (Q&A)

Ниже — ключевые вопросы, поднятые в игре, и ответы от ролей. Вопросы сгруппированы по темам (процессы, данные, время, контроль, деньги).

### 5.1 Процесс и жизненный цикл заказа

1) **В:** Какие статусы заказа обязательны “минимально”, чтобы всем хватило? (задал: ведущий → ответ: диспетчер, курьер, поддержка)  
**О:** Минимум: `создан/принят`, `готов к выдаче`, `назначен курьеру`, `курьер в пути к выдаче`, `забрал`, `в пути к клиенту`, `прибыл`, `доставлен`, `не доставлен` (с причиной), `отменён`. Поддержке нужен таймлайн событий с временем.

2) **В:** Что считается “фактом доставки” для споров? (ведущий → бухгалтерия, клиент, курьер)  
**О:** Нужен POD: одноразовый код от клиента или фото/подпись + время/гео. Клиенту удобнее код; курьеру — код/фото как резерв. Бухгалтерия требует неизменяемую фиксацию.

3) **В:** Как обрабатываем “заказ не готов” в точке выдачи? (курьер → поставщик, диспетчер)  
**О:** Поставщик должен отдавать статус “готов/не готов” и ожидаемое время готовности. Диспетчер хочет автоматический алерт и возможность переназначить, если ожидание слишком большое.

### 5.2 Данные заказа и валидации

4) **В:** Какие поля заказа нельзя оставлять пустыми? (оператор → поставщик, поддержка, бухгалтерия)  
**О:** Адрес доставки (или точка на карте), контакт клиента, состав/сумма, дедлайн/окно доставки, точка выдачи, инструкции по выдаче/упаковке, способ оплаты/признак “оплачено/не оплачено” (если применимо).

5) **В:** Кто отвечает за ошибки в адресе/контакте? (ведущий → поставщик, оператор)  
**О:** Источник — поставщик, но оператор должен валидировать (формат телефона, нормализация адреса, подсказки карт). При споре важно хранить “как пришло” и “как исправили”, кто исправил.

6) **В:** Нужна ли идемпотентность при создании заказа? (devops → оператор, поставщик)  
**О:** Да: поставщик/оператор могут отправить один и тот же заказ повторно. Нужен id заказа поставщика + правило объединения/отклонения дубля.

### 5.3 Где/когда происходят процессы (время, пики, SLA)

7) **В:** Какие пики нагрузки ожидаются? (учредитель → оператор, диспетчер)  
**О:** Типично: обед (11:30–14:30) и вечер (17:00–21:00), плюс пятница/выходные. В пики критичны очереди, приоритеты и быстрые переназначения.

8) **В:** Какие SLA важны и как их измеряем? (ведущий → поставщик, клиент, учредитель)  
**О:** SLA на: (а) время от приёма до назначения курьеру, (б) время ожидания готовности, (в) доставка в окно клиента, (г) доля “не доставлено”. Нужны метрики и причины отклонений.

9) **В:** Есть ли часовые пояса? (ведущий → учредитель)  
**О:** На старте один город (один TZ), но систему лучше проектировать TZ‑aware на будущее.

### 5.4 Управление и исключения

10) **В:** Кто имеет право “переназначить” заказ и что происходит с предыдущим курьером? (диспетчер → админ, devops)  
**О:** Переназначает диспетчер/система по правилам. Предыдущему курьеру фиксируется причина снятия, возможна компенсация “холостого приезда” по политике.

11) **В:** Какие причины “не доставлено” нужно собирать? (бухгалтерия → поддержка, диспетчер)  
**О:** Каталог причин: клиент недоступен, неверный адрес, отказ клиента, заказ повреждён, курьер не успел, форс‑мажор. Причины влияют на выплаты/штрафы и разбор качества.

12) **В:** Как поддержка должна эскалировать проблему? (поддержка → диспетчер)  
**О:** Кнопка эскалации в карточке заказа: ставит метку “инцидент”, уведомляет диспетчера, фиксирует SLA реакции.

### 5.5 Деньги, выплаты, интеграции

13) **В:** Как считаем оплату курьеров? (учредитель → бухгалтерия)  
**О:** База: фикс за доставку + доплаты (дальность/вес/срочность) − штрафы (опоздание по вине курьера). Нужны прозрачные правила и источники данных (статусы/время).

14) **В:** Какие данные бухгалтерия хочет получать и как часто? (ведущий → бухгалтерия)  
**О:** Ежедневные реестры доставок и начислений, плюс закрытие периода (неделя/месяц). Формат: API или выгрузка CSV/XLSX с неизменяемыми идентификаторами.

15) **В:** Нужен ли payment gateway прямо сейчас? (учредитель → поставщик, клиент)  
**О:** На старте можно без онлайн‑оплаты, но важно хранить признак оплаты и способ (нал/карта/у поставщика). На расширении — online payment + возвраты.

### 5.6 Роли, доступы, безопасность

16) **В:** Какие роли и права нужны минимально? (админ → диспетчер, оператор, поддержка, devops)  
**О:** Минимум: оператор (создаёт/правит заказы), диспетчер (переназначает/управляет), поддержка (читает + эскалирует), курьер (видит только свои заказы), админ (права/блокировки), учредитель (дашборды).

17) **В:** Что обязательно логировать? (devops → админ, бухгалтерия)  
**О:** Создание/изменение заказа, смены статусов, переназначения, изменения тарифов/правил, действия админов, попытки входа. Для выплат — кто изменил причины/статусы.

## 6) Итоговые наблюдения (выжимка)

1. Нужен единый “жизненный цикл заказа” со статусами и таймлайном событий — это снижает хаос для диспетчера/поддержки/бухгалтерии.
2. POD (код/фото/подпись) критичен для споров и расчётов.
3. Валидации при вводе (адрес/телефон/окно/точка выдачи) и хранение “оригинал vs исправлено” обязательны для качества данных.
4. В пиковые периоды необходимы приоритеты/очереди, алерты SLA и быстрые переназначения.
5. Прозрачные правила начислений/штрафов и интеграция с бухгалтерией — ключ к удержанию курьеров и масштабированию.

