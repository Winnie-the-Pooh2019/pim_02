# Предметная область и информационная модель

Познакомимся с понятием «предметная область» и научимся выделять сущности предметной области. Узнаем, что такое информационная модель системы, построим ее и научимся проверять модель по CRUD.


## Contents

1. [Chapter I](#chapter-i) \
   1.1. [Preamble](#11)
2. [Chapter II](#chapter-ii) \
   2.1. [Literature](#21)
3. [Chapter III](#chapter-iii) \
   3.1. [Предметная область](#31) \
   3.2. [Выделение сущностей и действий над ними](#32) \
   3.3. [Проверка сущностей по CRUD](#33) \
   3.4. [Словарь данных](#34) \
   3.5. [Построение ER-диаграммы](#35)
4. [Chapter IV](#chapter-iv) \
   4.1. [Задача 1. Запись на стрижку (Sign up for a haircut)](#41) \
   4.2. [Задача 2. Доставка заказов (Delivery of orders)](#42)
5. [Chapter V](#chapter-v) \
   5.1. [Exercise 00 — Entity detection (Выявление сущностей)](#51) \
   5.2. [Exercise 01 — Entity validation by CRUD (Проверка сущности по CRUD)](#52) \
   5.3. [Exercise 02 — Building a data dictionary (Построение словаря данных)](#53) \
   5.4. [Exercise 03 — Building a logical data model (Построение логической модели данных)](#54)

## Chapter I <div id="chapter-i"></div>

![Illustration_04](misc/images/Illustration_04.jpg)

### Preamble <div id="11"></div>

В предыдущем проекте для каждой разрабатываемой системы выявили бизнес-требования (высокоуровневую цель заказчика), познакомились с заинтересованными сторонами — теми, кто так или иначе заинтересован в системе, узнали, что такое контекстная диаграмма, как ее построить и как использовать. В этом проекте узнаем, что такое предметная область (domain), научимся выявлять сущности предметной области, с которыми работает система. Узнаем, что такое модель CRUD, и выполним проверку выделенных сущностей предметной области по модели CRUD.

## Chapter II <div id="chapter-ii"></div>

### Literature <div id="21"></div>

1. Карл Вигерс, Джой Битти, «Разработка требований к программному обеспечению», издание третье, дополненное.
2. BABOK v3 «Руководство к своду знаний по бизнес-анализу» IIBA.
3. Дин Леффингуэлл, Дон Уидриг «Принципы работы с требованиями к программному обеспечению».

## Chapter III <div id="chapter-iii"></div>

### 1. Предметная область <div id="31"></div>
**Предметная область (domain)** — часть реального мира, рассматриваемая в некоторых пределах.

Это обстоятельства и условия, которые:

- влияют на построение/изменение системы;
- находятся под влиянием построения/изменения системы;
- способствуют пониманию системы.

К предметной области могут относиться:

- предметы реального мира,
- потоки данных,
- люди,
- организации,
- бизнес-процессы,
- идеи,
- технологии,
- цели и задачи,
- связи между любыми из перечисленного выше.

То есть в предметную область входит не только система и внешние сущности, с ней связанные, но и все понятия, входящие в систему и так или иначе имеющие к ней отношение. Иными словами, все, что входит в систему и окружает систему.

На рис.1 показан контекст системы по задаче 1, зеленая область — контекст, прерывистая черта — границы контекста. В контекст мы выделили систему и то ее окружение (внешние сущности), которое непосредственно взаимодействуют с системой — это Регулятор и Санэпиднадзор.

Обрати внимание, что понятие Контекст не имеет прямого отношения к классу Context в программировании (предоставление доступа к базовым функциям приложения).

*Рисунок 1.*

![img1](misc/images/img1_eng.png)

Важные понятия предметной области — связи и зависимости. Именно знание понятий, понимание зависимостей, существующих в предметной области, и является ценным для аналитика, участвующего в разработке ИТ-систем. Но для того чтобы хорошо разобраться в новой предметной области (новом домене), требуется немало времени. Поэтому знания предметной области или разных предметных областей довольно высоко ценится в ИТ-командах. Более подробно о методах погружения в новый домен здесь:

1. [Ирина Гертовская «Погружение в новую предметную область. Чек-лист аналитика»](https://rutube.ru/video/3e68d3f9e376e6a212acef561d4166ff/?ysclid=m0m7njiwmy714477779).
2. [Марина Давыдова «Мастер-класс: исследование предметной области, как квест в работе аналитика»](https://rutube.ru/video/695293ff417d1f16dd22d98e86cd554e/).

### 2. Выделение сущностей и действий над ними <div id="32"></div>
Есть простой способ выделения сущностей в предметной области: в текстах, описывающих проблемы и потребности, выделяем пары «существительное — глагол» или «существительное — отглагольное существительное». Если существительное — объект реального мира (или виртуального мира, но еще не нашей системы) и встречается несколько раз — это кандидат в объекты (сущности) системы. Подробнее про порядок выделения сущностей:

1. Выделение кандидатов в сущности.

   Выделяем, например, подчеркиванием, существительные и особенно пары существительные с глаголами или отглагольными существительными в текстах, описывающих задачу или проблему. Если над чем-то выполняются действия — это кандидат в объекты системы.

2. Выделение сущностей.

   Выявляем из подчеркнутых существительных объекты, события — всё, что будет представлено в данных, над чем в нашей системе будут работать пользователи или сама система. Каждая сущность должна быть целостной и логически отделенной от всех других.

3. Определение ключевых свойств каждой сущности.

   Определяем уникальные для каждой сущности свойства (атрибуты). Иногда в тексте это существительное, каким-то образом относящееся к существительному, выделенному как сущность. Уникальных может быть один или несколько атрибутов на каждую сущность.

4. Определение связей между сущностями.

   Выявляем отношения между сущностями:
   - 1:1 (один-к-одному);
   - 1:М (один-ко-многим);
   - М:1 (многие-к-одному);
   - М:М (многие-ко-многим).

5. Сопоставление атрибутов с сущностями.

   Сопоставляем атрибуты с сущностями с учетом того, что бизнес будет использовать данные. Выявляем возможные значения атрибутов и условия, ограничения.

6. Назначение ключей и степени нормализации.

   Нормализация — метод организации моделей данных, в которых идентификаторы (ключи) назначаются группам данных для установления связей между ними без повторения данных.

7. Завершение, проверка модели данных.

   Моделирование — итеративный процесс, следует повторять и совершенствовать под потребности бизнеса.

### 3. Проверка сущностей по CRUD <div id="33"></div>
Хорошим способом проверки полноты действий над сущностью является методика CRUD. Каждый экземпляр сущности должен быть проверен на:
- создание (Create);
- чтение (Read);
- обновление (Update);
- удаление (Delete).

Возможно, какие-то из этих действий не должны выполняться над экземплярами отдельных сущностей, например, недопустимо удаление.
Но это должно быть сознательное решение, даже если мы хотим иметь сведения обо всех прошедших операциях, мы должны подумать: что делать, когда их станет слишком много? Возможно, вместо удаления мы можем выполнять действие «Перевод в архив».

В таблице 1 — матрица CRUD для сущности Услуга в задаче 1.

Иногда в процессе создания матрицы возникают вопросы, на которые нет ответа в тексте задачи. Мы должны уточнить эти вопросы у заказчика (если он есть) или придумать приемлемый вариант (гипотезу), отразить в дополнении к условию задачи (обязательно!) и продолжать анализ и разработку системы исходя из гипотезы.

[Подробнее про проверки по CRUD](https://conf.uml2.ru/index.php?all_classes&class_id=trebovaniya-ne-menyayutsya-eto-vy-ikh-nedovyyavili--10-tekhnik-proverki-polnoty-trebovanii).

*Таблица 1*

|      Сущность     |     CREATE                  |                                 |     READ                            |                      |     UPDATE                |                          |     DELETE                   |                                       |
|-------------------|-----------------------------|---------------------------------|-------------------------------------|----------------------|---------------------------|--------------------------|------------------------------|---------------------------------------|
|                   |     Роль                    |     Действие                    |     Роль                            |     Действие         |     Роль                  |     Действие             |     Роль                     |     Действие                          |
|     Услуга        |     Клиент, Посетитель    |     записывается на услугу    |     Мастер, Менеджер              |     просматривает    |     Клиент, Менеджер    |     изменяет услугу    |     Менеджер                 |     Переводит в архив после оплаты    |
|     Расписание    |     Менеджер                |     создает                     |     Мастер, Клиент, Посетитель    |     просматривает    |     Менеджер              |     изменяет             |     Выяснить у заказчика     |    Выяснить у заказчика   |                        

### 4. Словарь данных <div id="34"></div>
**Словарь данных (Data Dictionary)** — средство, техника, позволяющая описать данные в бизнес-терминах, а также содержащая другие сведения о данных: информацию о типах и форматах данных, детализацию структур данных и нормативно-справочной информации и, возможно, других ограничений, например, по безопасности. Таким образом, словарь данных является одним из способов ведения метаданных.

|                          | Глоссарий                                                                 | Словарь данных                                                                                                                                                                                                   |
|--------------------------|---------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Что содержит             | Термины, сокращения, понятия, бизнес-описание                             | Понятия, бизнес-описание, Техническое описание данных:<br> - типы данных,<br> - форматы данных,<br> - детализацию структуры данных,<br> - ограничения,<br> - привязку к нормативно-справочной информации,<br> - политику безопасности,<br> - и т. д. |
| Состав                   | Атомарные понятия: один термин —   один объект предметной области         | Может содержать составные   элементы, которые включают несколько простых или тоже составных элементов                                                                                                            |
| Специфика,   особенности | Универсальный характер, описывает   предметную область для любого проекта | Специфично для проектов   разработки, внедрения, сопровождения ИТ-систем                                                                                                                                         |

### 5. Построение ER-диаграммы <div id="35"></div>
Один из способов визуализации предметной области — модель данных ER-диаграмма (диаграмма «Сущность — связь»).
Вспомним, что модель — упрощенное описание действительности, позволяющее исследовать или обрабатывать объект. В зависимости от цели, стоящей перед командой, мы разрабатываем такие модели данных:
- Концептуальная модель;
- Логическая модель;
- Физическая модель.

**Концептуальная модель данных**

Задает основные конструкции, описывает семантику домена.
Часто используется на начальном этапе планирования, не содержит подробных сведений об атрибутах.
Включает в себя:
- основные сущности,
- связи.

Разработка концептуальной модели данных — обязанность аналитика.

**Логическая модель данных**

Отражает содержание и связи бизнеса, является расширением концептуальной модели. Представляет бизнес-информацию и определяется бизнес-правилами.
Определяется конкретной технологией манипулирования данными.
Включает в себя:
- сущности,
- атрибуты,
- ключи,
- взаимосвязи.

Логическую модель данных часто разрабатывает аналитик, но в сотрудничестве с архитектором или разработчиком.

**Физическая модель данных**

Обеспечивает разработку кода и всего, что с ним связано. Привязана к конкретной СУБД.
Включает в себя:
- все необходимые таблицы, столбцы, связи;
- свойства базы данных для физической реализации баз данных:
   - производительность базы данных;
   - стратегия индексации;
   - физическое хранилище;
   - денормализация.

Физическую модель данных на базе логической модели разрабатывает разработчик или архитектор.

## Chapter IV <div id="chapter-iv"></div>

### Description of tasks

### Задача 1. Запись на стрижку (Sign up for a haircut) <div id="41"></div>
Руководство сети барбершопов приняло решение о внедрении системы, обеспечивающей онлайн-запись на прием. Основная цель — развитие бизнеса путем расширения клиентской базы за счет возможности онлайн-записи, а также снижение трудозатрат сотрудников и уменьшение ручного труда за счет автоматического информирования клиентов по каналам связи.

Запись может осуществлять как зарегистрированный, так и незарегистрированный посетитель сайта. При записи можно выбрать тип услуги: парикмахерские или косметологические, а также саму услугу, мастера и время из свободных интервалов. Система должна обеспечивать автоматическую отправку напоминаний клиентам через выбранный клиентом канал связи (Telegram, WhatsApp, VK, СМС) по настроенному менеджером расписанию. После получения услуги система предлагает клиенту оценить услугу и написать предложения по улучшению работы.

Расписание мастеров и выполняемые каждым мастером услуги должен вводить менеджер, возможно, это будет не один человек. Он же отвечает за актуальность расписания и при необходимости корректирует его, осуществляет связь с клиентами в ручном режиме, проставляет отметку о выполнении услуги, начисляет и принимает оплату, передает данные об оплате в бухгалтерию. Также менеджер может получать отчеты о выполненных услугах и просматривать отзывы клиентов.

Любой мастер имеет возможность посмотреть расписание и запись на свои услуги, отзывы клиентов.

### Задача 2. Доставка заказов (Delivery of orders) <div id="42"></div>
В локдаун многие продуктовые магазины и предприятия питания резко увеличили объемы онлайн-продаж, и возросла потребность в быстрой доставке мелких партий товаров индивидуальным клиентам.

Компания студентов собрались и решила создать стартап службы доставки.

Идея состоит в том, чтобы оперативно получать информацию о заказах, месте и сроке комплектации, месте доставки, желаемых сроках доставки и раздавать инфо курьерам, которые будут получать заказ в месте комплектации и доставлять в место доставки. Решили развернуть онлайн-систему, куда стекаются заказы и откуда курьеры оперативно разбирают заказы для выполнения. На первом этапе решили собирать заказы от магазинов и предприятий питания любым доступным способом и вводить в систему в едином формате силами оператора, но разработать мобильное приложение для курьеров.

Курьер должен иметь возможность просматривать информацию о заказах, выбирать заказ из свободных, бронировать его, забирать в точке выдачи и доставлять клиенту. Результат своих действий курьер должен оперативно отражать в системе через мобильное приложение. Также в системе должен работать диспетчер, который контролирует курьеров и при необходимости переназначает заказы. Информация о поступивших заказах должна направляться в бухгалтерию (в другую ИТ-систему) для расчета с поставщиками заказов за доставку. Также в бухгалтерию должна направляться информация о доставке заказа, где будет производиться расчет оплаты курьеров. Начисленная оплата должна передаваться в систему и отражаться в личном кабинете курьера. И еще запланировано рабочее место администратора, регистрирующего курьеров и назначающего всем права доступа.

## Chapter V <div id="chapter-v"></div>

### Exercise 00 — Entity detection (Выявление сущностей) <div id="51"></div>
**Для каждой задачи:**

1. Определи не менее 7 сущностей (руководствуясь порядком выделения сущностей) с которыми будет работать система.
2. Определи для каждой сущности название, укажи назначение.
3. Определи для каждой сущности основные (ключевые) атрибуты.
4. Укажи свои ответы в файле ex00\_<префикс продукта>\_entity.xlsx.

### Exercise 01 — Entity validation by CRUD (Проверка сущности по CRUD) <div id="52"></div>
**Для задачи 1:**

1. Для каждой сущности проведи проверку полноты операций по CRUD.
2. Для проверки по CRUD отрази в таблице (подобной приведенной на рис.2 в п.3. Проверка сущностей по CRUD):
   1. Укажи в таблице роли стейкхолдеров и действия, при которых выполняется операция CRUD;
   2. В случае если из условий задачи или интервью непонятно, кто и когда выполняет операцию, предложи гипотезу или укажи потребность уточнения у стейкхолдеров (выделить цветом).
3. Запиши свои ответы в файле ex01\_<префикс продукта>\_crud.xlsx.

### Exercise 02 — Building a data dictionary (Построение словаря данных) <div id="53"></div>
**Для каждой задачи:**

1. Построй словарь данных.
2. Включи в словарь данных название сущности, мнемонику, описание понятия, тип данных, обязательность.
3. Размести таблицу в файле ex02\_<префикс продукта>\_dict.xxx (xxx — расширение файла).

### Exercise 03 — Building a logical data model (Построение логической модели данных) <div id="54"></div>
**Для каждой задачи:**

1. Построй ER-диаграмму — логическую модель данных.
2. Включи в ER-диаграмму выбранные тобой сущности, поддерживающие справочники и развязочные таблицы для связей М:М.
3. В ER-диаграмме укажи множественность связей между сущностями.
4. Опиши глаголами связи между сущностями в ER-диаграмме.
5. Размести диаграмму в файле ex03\_<префикс продукта>\_model.xxx (xxx — расширение файла).


Работай в директории src. В твоей директории не должно быть иных файлов, кроме тех, что обозначены в заданиях.